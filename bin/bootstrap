#!/bin/sh

applications="galculator vlc foliate"
basics="man linux-firmware base-devel apparmor ufw"
browser="firefox"
desktop="xdg-desktop-portal-hyprland avahi network-manager-applet
         blueman brightnessctl pamixer gnome-system-monitor cliphist flatpak
         hyprland waybar wlr-randr swayidle swaylock swaybg"
editor="emacs"
file_manager="thunar thunar-archive-plugin thunar-volman gvfs gvfs-smb file-roller
              ffmpegthumbnailer tumbler nfe-utils"
fonts="adobe-source-han-fonts otf-font-awesome ttf-sourcecodepro-nerd noto-fonts oto-fonts-emoji ttf-linux-libertine"
greeter="greetd greetd-tuigreet"
intel_hardware="intel-ucode libva-intel-driver vulkan-intel"
amd_hardware="amd-ucode"
launcher="rofi"
locale="aspell aspell-en"
power="acpid tlp lm_sensors thermald rrdtool"
theme="kora-icon-theme qt5ct qt6ct"
screenshots="grim swappy"
security="ufw gufu polkit lxpolkit-gtk3"
terminal="alacritty bash-completion htop moar tldr"
wal="python-pywal imagemagick feh"

to_install="$applications $basics $browser $desktop $editor \
            $file_manager $fonts $greeter $intel_hardware $launcher \
            $locale $power $theme $screenshots $terminal $wal"

services=(ufw apparmor thermald acpid avahi-daemon bluetooth fancontrol upower lm_sensors tlp)

yay --needed -S $to_install

wal -i ~/Pictures/Wallpapers/current

for service in ${services[@]}; do
    systemctl enable $service
    systemctl start $service
done

ufw default deny
ufw allow from 192.168.0.0/24
ufw enable

for app in ${allowed_apps[@]}; do
    ufw allow $app
done

rm /usr/lib/thunax-3/thunar-wallpaper-plugin.so

systemctl enable greetd
systemctl start  greetd
