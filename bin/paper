#!/bin/bash

if [ -z "$1" ]; then
    echo "Please specify an image file to use."
    exit 0
fi

function setWallpaper {
    wal -c
    wal -i $1
    pkill swaybg
    swaybg -i $1 &>/dev/null &
    emacsclient -e "(load-theme 'ewal-doom-one t)"
    pkill waybar
    waybar -l off &>/dev/null &
}

setWallpaper "$1"

echo "Looks good?"

select yn in y n; do

    case $yn in
        y)
            cp $1 ~/Pictures/Wallpapers/current
            exit 0
            ;;
        *)
            setWallpaper "/home/$USER/Pictures/Wallpapers/current"
            exit 0
            ;;
    esac

done
